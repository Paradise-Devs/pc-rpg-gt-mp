<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel='stylesheet' href='../css/pcfw.css'>
        <link rel='stylesheet' href='../css/gui.css'>
        <link rel='stylesheet' href='../css/icons-fa.css'>
        <link rel='stylesheet' href='../css/icons-clothes.css'>
        <link rel='stylesheet' href='../css/icons-bodyparts.css'>
        <link rel='stylesheet' href='../css/icons-media.css'>
        <link rel="stylesheet" href="../css/sweetalert.css">
        <link rel="stylesheet" href="../css/jquery-ui.css">
    </head>
    <body id="main" class="test-enabled">
        <div class="container-fluid">
            <block class="inventory">
                <content>
                    <inventory>
                        <item class="special activable" id="item-0">
                            <i class="fa fa-car"></i>
                            <badge><i class="fa fa-star"></i></badge>
                            <container>
                                <header>
                                    <icon><i class="fa fa-car"></i></icon>
                                    <info>
                                        <tit>X80 Proto</tit>
                                        <subtit>Veículo</subtit>
                                        <subtit>item vinculado a conta</subtit>
                                    </info>
                                </header>
                                <desc>Este é um veículo especial e pode ser resgatado em qualquer concessionária de Los Santos.</desc>
                                <commands><i class="media-mouse-right-button"></i> para ativar</commands>
                            </container>
                        </item>
                        <item class="rare activable" id="item-1">
                            <i class="fa fa-car"></i>
                            <badge><i class="fa fa-star"></i></badge>
                            <container>
                                <header>
                                    <icon><i class="fa fa-car"></i></icon>
                                    <info>
                                        <tit>Infernus</tit>
                                        <subtit>Veículo</subtit>
                                    </info>
                                </header>
                                <desc>Este é um veículo raro e pode ser resgatado em qualquer concessionária de Los Santos.</desc>
                                <commands><i class="media-mouse-right-button"></i> para ativar</commands>
                            </container>
                        </item>
                        <item class="common activable" id="item-2">
                            <i class="clothes-hoodie"></i>
                            <container>
                                <header>
                                    <icon><i class="clothes-hoodie"></i></icon>
                                    <info>
                                        <tit>Kit Outono</tit>
                                        <subtit>Roupas</subtit>
                                    </info>
                                </header>
                                <desc>Desbloqueia o kit de inverno para compra nas lojas de Los Santos.</desc>
                                <commands><i class="media-mouse-right-button"></i> para ativar</commands>
                            </container>
                        </item>
                        <item class="common non-usable" id="item-3">
                            <i class="fa fa-key"></i>
                            <container>
                                <header>
                                    <icon><i class="fa fa-key"></i></icon>
                                    <info>
                                        <tit>X80 Proto</tit>
                                        <subtit>Chave de veículo</subtit>
                                    </info>
                                </header>
                                <desc>Sem esta chave no inventário, você não consegue utilizar seu veículo.</desc>
                                <commands><i class="media-mouse-right-button"></i> para ativar</commands>
                            </container>
                        </item>
                        <item class="empty" id="item-4">
                        </item>
                        <item class="empty" id="item-5">
                        </item>
                        <item class="empty" id="item-6">
                        </item>
                        <item class="empty" id="item-7">
                        </item>
                        <item class="empty" id="item-8">
                        </item>
                        <item class="empty" id="item-9">
                        </item>
                        <item class="empty" id="item-10">
                        </item>
                        <item class="empty" id="item-11">
                        </item>
                        <item class="empty" id="item-11">
                        </item>
                        <item class="empty" id="item-11">
                        </item>
                        <item class="empty" id="item-12">
                        </item>
                        <item class="empty" id="item-13">
                        </item>
                        <item class="empty" id="item-14">
                        </item>
                        <item class="empty" id="item-15">
                        </item>
                        <item class="empty" id="item-16">
                        </item>
                        <item class="empty" id="item-17">
                        </item>
                        <item class="empty" id="item-18">
                        </item>
                        <item class="empty" id="item-19">
                        </item>
                        <item class="empty" id="item-20">
                        </item>
                        <item class="empty" id="item-21">
                        </item>
                        <item class="empty" id="item-22">
                        </item>
                        <item class="empty" id="item-23">
                        </item>
                        <item class="empty" id="item-24">
                        </item>
                        <item class="empty" id="item-25">
                        </item>
                        <item class="empty" id="item-26">
                        </item>
                        <item class="empty" id="item-27">
                        </item>
                        <item class="empty" id="item-28">
                        </item>
                        <item class="empty" id="item-29">
                        </item>
                        <!-- id max 29 -->
                    </inventory>
                </content>
                <footer class="right">
                    Banco: <money>$99.000</money>
                    <separator></separator>
                    Carteira: <money>$99.000</money>
                    <button>adicionar item</button>
                </footer>
            </block>
        </div>

        <script src="../js/jquery.js"></script>
        <script src="../js/jquery-ui.js"></script>
        <script src="../js/tether.js"></script>
        <script src="../js/pcfw.js"></script>
        <script src="../js/sweetalert.js"></script>
        <script>
            var outside = false;

            $("inventory").sortable({
                placeholder: "ui-state-highlight",
                receive: function(e, ui) {
                    outside = false;
                },
                out: function(e, ui) {
                    outside = true;
                },
                over: function(e, ui ) {
                    outside = false;
                },
                beforeStop: function (event, ui) {
                    var itemId = $(ui.item);
                    if (outside) {
                        swal(
                        {
                            title: "Deseja remover este item?",
                            text: "Você não vai ter como recuperar este item posteriormente.",
                            type: "warning",
                            showCancelButton: true,
                            confirmButtonText: "Remover",
                            cancelButtonText: "Voltar",
                            closeOnConfirm: false
                        },
                        function ()
                        {
                            OnDeleteItem(itemId);
                        });
                    }
                },
            });

            $("inventory > item.activable").on("contextmenu", function(){
                var itemId = $(this);
                swal(
                {
                    title: "Deseja ativar este item?",
                    text: "Este item será vinculado a sua conta e não poderá ser utilizado novamente.",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonText: "Ativar",
                    cancelButtonText: "Voltar",
                    closeOnConfirm: false
                },
                function ()
                {
                    OnActivateItem(itemId);
                });
                return false;
            });

            $("inventory > item.usable").on("contextmenu", function(){
                var itemId = $(this);
                OnUseItem(itemIdb);
                return false;
            });

            $("inventory > item.non-usable").on("contextmenu", function(){
                return false;
            });

            $("footer button").on("click", function(){
                AddItem("activable", "common", "Testing", "Testing", 1, "fa fa-female", 0);
            });

            function OnDeleteItem(id) {
                $(id).empty();
                $(id).removeClass();
                swal("Removido!", "Item removido com sucesso!", "success");
            }

            function OnActivateItem(id) {
                $(id).empty();
                $(id).removeClass();
                swal("Ativado!", "Você já pode adquirir o item ativado!", "success");
            }

            function AddItem(type = 'static', rarity, title, description, category, icon, databaseid, slot, tradable = true) {
                /*
                    Type:
                        activable, usable, static

                    Rarity:
                        common, rare, special

                    Title:
                        Item title

                    Description:
                        Item desc

                    Category:
                        0: vehicle
                        1: clothes
                        2: bodyparts
                        3: food
                        4: drink
                        5: keys

                    Icon:
                        Icon class

                    Databaseid:
                        Server ID

                    Slot:
                        Item slot on player inventory

                    Tradable:
                        Item account related (not tradable)
                        default = true
                */



                var editingElement = $("item.empty").first().removeClass().addClass(type + ' ' + rarity + ' recent-added');

                $(editingElement).append(
                        '<i class="' + icon + '"></i>' +
                        '<container>' +
                            '<header>' +
                                '<icon><i class="' + icon + '"></i></icon>' +
                                '<info>' +
                                    '<tit>' + title + '</tit>' +
                                    '<subtit>' + category + '</subtit>' +
                                '</info>' +
                            '</header>' +
                            '<desc>' + description + '</desc>' +
                        '</container>');

                if(!tradable) {
                    $("container header info", editingElement).append('<subtit>Item vinculado a conta</subtit>');
                }

                if(rarity != 'common') {
                    $(editingElement).append('<badge><i class="fa fa-star"></i></badge>');
                }

                if(type == 'activable') {
                    $("container", editingElement).append('<commands><i class="media-mouse-right-button"></i> para ativar</commands>');
                } else if(type == 'usable') {
                    $("container", editingElement).append('<commands><i class="media-mouse-right-button"></i> para consumir</commands>');
                }

                $(editingElement).removeClass('recent-added');
            }
        </script>
    </body>
</html>
